flowchart TD
    A[Fetch OHLCV via ccxt] --> B[Cache/Load Parquet]
    B --> C[Data validation]
    C -->|ok| D[Generate signals]
    C -->|fail| X[Log + mark row ok=false]
    D --> E[Backtest]
    D --> S[Signals validation]
    E --> F[Backtest validation]
    S --> G[Metrics (Sharpe, DSR, DD, CVaR)]
    F --> G
    G --> H[Persist to DuckDB]
    H --> I[Markdown Report]
    H --> J[Streamlit Dashboard]


flowchart TD
    A[Start] --> B[ccxt load_markets]
    B --> C{Filter USDT spot active}
    C --> D[fetch_tickers]
    D --> E[Rank by 24h quoteVolume]
    E --> F{Top N}
    F -->|for each symbol x timeframe| G[Check cache]
    G -->|fresh| H[Load from cache]
    G -->|stale/missing| I[fetch_ohlcv]
    I --> J[Save to cache]
    H --> K[Compute features (SMA/EMA)]
    J --> K
    K --> L{Parallel grid over strategies x params}
    L --> M[Generate signals]
    M --> N[Backtest: r=px.pct_change; pos=sig.shift(1)]
    N --> O[Metrics: Sharpe, DSR, maxDD, CVaR]
    O --> P{All combos done?}
    P -->|No| L
    P -->|Yes| Q[Rank by Sharpe]
    Q --> R[Write universe summary report]
    R --> S[End]

